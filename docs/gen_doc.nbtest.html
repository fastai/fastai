---

title: gen_doc.nbtest
keywords: fastai
sidebar: home_sidebar

summary: "Helper functions to search for api tests"
---

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="gen_doc.nbtest">gen_doc.nbtest<a class="anchor-link" href="#gen_doc.nbtest">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notebook functions to search for api tests</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Find-tests-for-any-function/class">Find tests for any function/class<a class="anchor-link" href="#Find-tests-for-any-function/class">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/gen_doc.nbtest.html#show_test"><code>show_test</code></a> and <a href="/gen_doc.nbtest.html#doctest"><code>doctest</code></a> searches for any implemented tests for a given fastai class or function</p>
<p>For test writers:</p>
<ul>
<li>Use this module to search for tests and get a better idea on which parts of the fastai api need more functional tests</li>
</ul>
<p>For fastai users:</p>
<ul>
<li>Usage is similar to <a href="/gen_doc.nbdoc.html#show_doc"><code>nbdoc.show_doc</code></a> and <a href="/gen_doc.nbdoc.html#doc"><code>nbdoc.doc</code></a>.  </li>
<li>It's here to help you find associated tests for a given function can help understand usage. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Usage:">Usage:<a class="anchor-link" href="#Usage:">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="show_test"><code>show_test</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>show_test</code>(<strong><code>elt</code></strong>) → <code>str</code></p>
</blockquote>
<p>Show associated tests for a fastai function/class</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Show tests from function</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai.basic_train</span> <span class="k">import</span> <span class="n">Learner</span>
<span class="n">show_test</span><span class="p">(</span><span class="n">Learner</span><span class="o">.</span><span class="n">fit</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>Tests found for <code>fit</code>:</p>
<p>This tests:</p>
<ul>
<li><code>pytest -sv tests/test_train.py::test_fit</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_train.py#L27" class="source_link" style="float:right">[source]</a></li>
</ul>
<p>Related tests:</p>
<ul>
<li><code>pytest -sv tests/test_basic_train.py::test_destroy</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_basic_train.py#L125" class="source_link" style="float:right">[source]</a></li>
</ul>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Show tests from a Class</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai.basic_data</span> <span class="k">import</span> <span class="n">DataBunch</span>
<span class="n">show_test</span><span class="p">(</span><span class="n">DataBunch</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>Tests found for <code>DataBunch</code>:</p>
<p>Direct tests:</p>
<ul>
<li><code>pytest -sv tests/test_basic_data.py::test_DataBunch_oneitem</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_basic_data.py#L41" class="source_link" style="float:right">[source]</a></li>
<li><code>pytest -sv tests/test_basic_data.py::test_DataBunch_onebatch</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_basic_data.py#L32" class="source_link" style="float:right">[source]</a></li>
<li><code>pytest -sv tests/test_basic_data.py::test_DataBunch_show_batch</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_basic_data.py#L49" class="source_link" style="float:right">[source]</a></li>
<li><code>pytest -sv tests/test_basic_data.py::test_DataBunch_Create</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_basic_data.py#L18" class="source_link" style="float:right">[source]</a></li>
</ul>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai.text.data</span> <span class="k">import</span> <span class="n">TextList</span>
<span class="n">show_test</span><span class="p">(</span><span class="n">TextList</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>Tests found for <code>TextList</code>:</p>
<p>Related tests:</p>
<ul>
<li><code>pytest -sv tests/test_text_data.py::test_filter_classes</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_text_data.py#L39" class="source_link" style="float:right">[source]</a></li>
<li><code>pytest -sv tests/test_text_data.py::test_from_folder</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_text_data.py#L28" class="source_link" style="float:right">[source]</a></li>
<li><code>pytest -sv tests/test_text_data.py::test_regression</code> <a href="https://github.com/fastai/fastai/blob/master/tests/test_text_data.py#L161" class="source_link" style="float:right">[source]</a></li>
</ul>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Different-test-types">Different test types<a class="anchor-link" href="#Different-test-types">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Above, you will see 3 different test types: <code>This tests</code>, <code>Direct tests</code>, and <code>Related tests</code></p>
<ul>
<li><code>This tests</code> - Searches for function matches in <code>test_api_db.json</code>. This json file is populated from <code>doctest.this_tests</code> calls.</li>
<li><code>Direct tests</code> - Searches for any test function whose name contains the fastai function call</li>
<li><code>Related tests</code> - Returns any test function where the fastai function in called inside the body</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Show-in-notebook-inline:">Show in notebook inline:<a class="anchor-link" href="#Show-in-notebook-inline:">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="doctest"><code>doctest</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>doctest</code>(<strong><code>elt</code></strong>)</p>
</blockquote>
<p>Inline notebook popup for <a href="/gen_doc.nbtest.html#show_test"><code>show_test</code></a></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Internal-search-methods">Internal search methods<a class="anchor-link" href="#Internal-search-methods">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_dir_tests"><code>find_dir_tests</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L94" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_dir_tests</code>(<strong><code>elt</code></strong>) → <code>Tuple</code>[<code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]], <code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]]]</p>
</blockquote>
<p>Searches <code>fastai/tests</code> folder for any test functions related to <code>elt</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="lookup_db"><code>lookup_db</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L83" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>lookup_db</code>(<strong><code>elt</code></strong>) → <code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]]</p>
</blockquote>
<p>Finds <code>this_test</code> entries from test_api_db.json</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_test_matches"><code>find_test_matches</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L136" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_test_matches</code>(<strong><code>elt</code></strong>, <strong><code>test_file</code></strong>:<code>Path</code>) → <code>Tuple</code>[<code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]], <code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]]]</p>
</blockquote>
<p>Find all functions in <code>test_file</code> related to <code>elt</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_test_files"><code>find_test_files</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L114" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_test_files</code>(<strong><code>elt</code></strong>, <strong><code>exact_match</code></strong>:<code>bool</code>=<strong><em><code>False</code></em></strong>) → <code>List</code>[<code>Path</code>]</p>
</blockquote>
<p>Searches in <code>fastai/tests</code> directory for module tests</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="direct_test_match"><code>direct_test_match</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L146" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>direct_test_match</code>(<strong><code>fn_name</code></strong>:<code>str</code>, <strong><code>lines</code></strong>:<code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]], <strong><code>rel_path</code></strong>:<code>str</code>) → <code>List</code>[<a href="/gen_doc.nbtest.html#TestFunctionMatch"><code>TestFunctionMatch</code></a>]</p>
</blockquote>
<p>Any <code>def test_function_name():</code> where test name contains function/class name</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fuzzy_test_match"><code>fuzzy_test_match</code><a href="https://github.com/fastai/fastai/blob/master/fastai/gen_doc/nbtest.py#L170" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fuzzy_test_match</code>(<strong><code>fn_name</code></strong>:<code>str</code>, <strong><code>lines</code></strong>:<code>List</code>[<code>Dict</code>[<code>KT</code>, <code>VT</code>]], <strong><code>rel_path</code></strong>:<code>str</code>) → <code>List</code>[<a href="/gen_doc.nbtest.html#TestFunctionMatch"><code>TestFunctionMatch</code></a>]</p>
</blockquote>
<p>Find any lines where <code>fn_name</code> is invoked and return the parent test function</p>

</div>

</div>

</div>
</div>

</div>
</div>
 

